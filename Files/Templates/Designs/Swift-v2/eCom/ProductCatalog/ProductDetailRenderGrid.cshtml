@inherits ViewModelTemplate<ProductViewModel>
@using Dynamicweb.Rendering
@using Dynamicweb.Ecommerce.ProductCatalog

@{
	Pageview.Meta.AddTag("twitter:image", Model.DefaultImage.Value);
	Pageview.Meta.AddTag("twitter:description", Model.MetaDescription ?? Model.ShortDescription);
	Pageview.Meta.AddOpenGraphTag("type", "product");
	Pageview.Meta.AddOpenGraphTag("image", Model.DefaultImage.Value);
	Pageview.Meta.AddOpenGraphTag("description", Model.MetaDescription ?? Model.ShortDescription);

	if (Dynamicweb.Context.Current?.Items.Contains("ProductDetails") ?? false)
	{
		Dynamicweb.Context.Current.Items["ProductDetails"] = Model;
	}
	else
	{
		Dynamicweb.Context.Current?.Items.Add("ProductDetails", Model);
	}
	var detailPage = GetPageIdByNavigationTag("ProductDetailPage");
}

@RenderGrid(Model.PrimaryOrDefaultGroup.PrimaryPageId > 0 ? Model.PrimaryOrDefaultGroup.PrimaryPageId : detailPage)
