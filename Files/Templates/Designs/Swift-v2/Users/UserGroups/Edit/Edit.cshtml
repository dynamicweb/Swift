@inherits ViewModelTemplate<UserGroupDetailViewModel>
@using Dynamicweb.Frontend
@using Dynamicweb.Rendering
@using Dynamicweb.Users.Frontend
@using Dynamicweb.Users.Frontend.UserGroups

@{
    var baseUrl = SearchEngineFriendlyURLs.GetFriendlyUrl($"default.aspx?ID={Pageview?.Page?.ID ?? 0}");
    var userGroupId = Dynamicweb.Context.Current?.Request.QueryString.Get("UserGroupId") ?? string.Empty;
}

<form method="post" id="editUserGroupForm" action="@(baseUrl)">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb mb-3" style="--bs-breadcrumb-divider: '>'; --bs-breadcrumb-item-padding-x: 1rem; --bs-breadcrumb-font-size: .875em;">
            <li class="breadcrumb-item"><a href="@(baseUrl)">@(Pageview?.Page?.GetDisplayName())</a></li>
            <li class="breadcrumb-item active" aria-current="page">@(Model.Name)</li>
        </ol>
    </nav>

    <header class="mb-3">
        <h1 class="h4 mb-0">@(Model?.Name)</h1>
    </header>

    @{
        var result = Model?.Result;
        if (result == UserGroupResultType.None)
        {
            <div class="alert alert-success">@Translate("The account has been saved successfully")</div>
        }
        else if (result == UserGroupResultType.InvalidEmail)
        {
            <div class="alert alert-danger">@Translate("The email address is invalid")</div>
        }
        else if (result == UserGroupResultType.InvalidCustomerNumber)
        {
            <div class="alert alert-danger">@Translate("The customer number is invalid")</div>
        }
        else if (result == UserGroupResultType.IncorrectPermission)
        {
            <div class="alert alert-danger">@Translate("You do not have permission to edit this account")</div>
        }
    }

    <div class="vstack">
        <p class="text-muted">@Translate("Edit the account by filling in the details below")</p>
        
        <input type="hidden" name="UserGroupId" value="@(Model?.Id ?? 0)" />

        <div class="form-floating">
            <input type="text" class="form-control" name="Name" id="Name" placeholder="@Translate("Name")" value="@(Model?.Name)" autocomplete="off" />
            <label for="Name" class="form-label">@Translate("Name")</label>
        </div>

        <div class="form-floating mt-3">
            <input type="text" class="form-control" name="CustomerNumber" id="CustomerNumber" placeholder="@Translate("Customer number")" value="@(Model?.CustomerNumber)" autocomplete="off" />
            <label for="CustomerNumber" class="form-label">@Translate("Customer number")</label>
        </div>

        <div class="form-floating mt-3">
            <input type="email" class="form-control" name="EmailAddress" id="EmailAddress" placeholder="@Translate("Email")" value="@(Model?.EmailAddress)" autocomplete="off" />
            <label for="EmailAddress" class="form-label">@Translate("Email")</label>
        </div>

        <div class="hstack gap-2 mt-3 justify-content-end">
            <a href="@(baseUrl)" type="button" class="btn btn-outline-secondary btn-sm" data-dw-button>@Translate("Cancel")</a>
            <button type="submit" class="btn btn-primary btn-sm" name="UserGroupCmd" value="SaveGroup" data-dw-button>@Translate("Save account")</button>
        </div>
    </div>
</form>