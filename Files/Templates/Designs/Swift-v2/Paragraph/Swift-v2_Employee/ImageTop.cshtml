@inherits Dynamicweb.Rendering.ViewModelTemplate<Dynamicweb.Frontend.ParagraphViewModel>
@using Dynamicweb.Frontend
@using System.Collections.Generic

@{
    if(Model.Item.TryGetValue<UserViewModel>("User", out var user)) {
        
        var company = user?.Company;
        var department = user?.Department;
        var email = user?.Email;
        var image = new ImageFileViewModel { Path = user?.Image };
        var jobTitle = user?.JobTitle;
        var name = user?.Name;
        var phoneBusiness = user?.PhoneBusiness;

        <div class="card border-0 text-center mx-auto" style="max-inline-size: 25rem;" itemscope itemtype="https://schema.org/Person">
            @if(image.Path is not null)
            {
                <figure class="m-0">
                    <img src="@image?.ToGetImage(new(){ Width = 400, Ratio = "1/1" })" class="card-img shadow" alt="@name" itemprop="image">
                </figure>
            }
            <div class="card-body fs-7">
                @if(!string.IsNullOrEmpty(name))
                {
                    <h3 class="h4 pt-1 mb-2" itemprop="name">@name</h3>
                }
                @if(!string.IsNullOrEmpty(jobTitle))
                {
                    <p class="mb-0 text-body text-opacity-75" itemprop="jobTitle">@jobTitle</p>
                }
                <div class="border-top mx-auto my-3" style="max-width: 5rem;"></div>
                @if(!string.IsNullOrEmpty(department))
                {
                    <p class="mb-0 text-body text-opacity-75" itemprop="department">@department</p>
                }
                @if(!string.IsNullOrEmpty(company))
                {
                    <p class="mb-0 text-body text-opacity-75" itemprop="worksFor">@company</p>
                }
                @if(!string.IsNullOrEmpty(email))
                {
                    <a href="mailto:@email" itemprop="email">
                        <span class="d-block pt-2">@email</span>
                    </a>
                }
                @if(!string.IsNullOrEmpty(phoneBusiness))
                {
                    <a href="tel:@phoneBusiness" itemprop="telephone">
                        <span class="d-block pt-1">@phoneBusiness</span>
                    </a>
                }
            </div>
        </div>
    }           
}
