@inherits Dynamicweb.Rendering.ViewModelTemplate<UserViewModel>
@using Dynamicweb.Frontend
@using Dynamicweb.Frontend.Navigation
@using Dynamicweb.Ecommerce.ProductCatalog
@using Dynamicweb.Ecommerce.Products

@if (Model?.ID != null)
{
    <div class="border hstack me-auto p-1 position-relative rounded-pill">
        <a href="@(!string.IsNullOrEmpty(SearchEngineFriendlyURLs.GetFriendlyUrl(GetPageIdByNavigationTag("CustomerCenter"))) ? SearchEngineFriendlyURLs.GetFriendlyUrl(GetPageIdByNavigationTag("CustomerCenter")) : string.Empty )" class="stretched-link"></a>

        @if(Model.TryGetImageFile(out ImageFileViewModel? image))
        {
            <div class="me-2" style="height:2rem; aspect-ratio:1;">
                <img src="@image.ToGetImage(new(){ Width = 32, Ratio = "1/1" })" alt="@Model.Name" class="img-thumbnail rounded-circle" itemprop="image"/>
            </div>
        }
        else 
        {
            <div class="btn btn-primary hstack justify-content-center p-0 me-2" style="height:2rem; aspect-ratio:1;" data-dw-button="primary">
                <div class="d-flex fw-bold fs-7 lh-1 m-0">
                    <span>@(Model?.FirstName?.Trim().First() ?? Model?.Name?.Trim().ElementAt(0))</span>
                    <span>@(Model?.LastName?.Trim().First() ?? Model?.Name?.Trim().ElementAt(1))</span>
                </div>
            </div>
        }

        <div class="me-2">
            <div class="fw-bold fs-8">@(Model?.FirstName ?? Model?.Name) @(Model?.LastName ?? null)</div>
        </div>

    </div>
}